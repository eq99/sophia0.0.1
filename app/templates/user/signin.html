{% extends 'base.html' %}

{% block article %}

<form action="/signin" method="POST">
  <div class="form-group row">
    <div class="col-sm-10">
      <input type="tel" class="form-control" name="phone" id="phone" placeholder="输入手机号">
    </div>
  </div>
  <div class="form-group row">
    <div class="input-group mb-3 col-sm-10">
      <input type="text" class="form-control" name="smscode" placeholder="输入短信验证码" aria-label="手机号" aria-describedby="basic-addon2">
      <div class="input-group-append">
        <button class="btn btn-outline-secondary" id="submitPhone" type="button">获取短信验证码</button>
      </div>
    </div>
  </div>
  <div class="form-group row">
      <button type="submit" class="btn btn-primary col-sm-10">注册/登录</button>
  </div>
</form>

<!-- <form method="POST" action="/signin">
  <input type="text" , placeholder="phone" , name="phone" , id="phone" />
  <button id="submitPhone">获取验证码</button>
  <input type="text" , placeholder="sms code" , name="smscode" />
  <button type="submit">Sign In</button>
</form> -->

<script>
  document.getElementById("submitPhone").addEventListener("click", function (e) {
    e.preventDefault();
    const phone = document.getElementById("phone").value;
    let formData = new FormData();
    formData.append('phone', phone);
    fetch('/smscode', {
      method: 'POST',
      body: formData
    })
    .then(response => {return response.json()})
    .then(data => {
      console.log(data);
    })
    .catch((error) => {
      console.log('Error:', error);
    });

  });
</script>

{% endblock %}